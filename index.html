<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WORKSPHERE</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
   * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Segoe UI", sans-serif; }

    body {
      display: flex;
      height: 100vh;
      background: linear-gradient(135deg, #3c1053, #ad5389);
      color: #333;
    }

    /* Sidebar */
    .sidebar {
      width: 250px;
      background: rgba(40, 0, 60, 0.95);
      backdrop-filter: blur(10px);
      padding: 25px 0;
      display: flex;
      flex-direction: column;
      border-right: 1px solid rgba(255, 255, 255, 0.15);
      color: #fff;
    }

    .sidebar h2 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 24px;
      font-weight: bold;
      letter-spacing: 1px;
      color: #ffb6f2;
    }

    .sidebar a {
      padding: 14px 22px;
      color: #ddd;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    .sidebar a:hover,
    .sidebar a.active {
      background: linear-gradient(90deg, #7a1ca2, #ff66b2);
      color: #fff;
      border-left: 4px solid #ffb6f2;
    }

    /* Main */
    .main {
      flex: 1;
      padding: 25px 35px;
      overflow-y: auto;
      background-color: #fafafa;
      border-radius: 0 20px 20px 0;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }

    .header h1 {
      font-size: 28px;
      font-weight: bold;
      color: #6a0dad;
    }

    .header input {
      padding: 10px 16px;
      border: 1px solid #ccc;
      border-radius: 25px;
      outline: none;
      width: 240px;
      font-size: 15px;
      background: #fff;
    }

    /* Cards */
    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
    }

    .card {
      background: #fff;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.08);
      transition: transform 0.2s ease;
    }

    .card:hover { transform: translateY(-4px); }

    .card h3 {
      margin-bottom: 14px;
      font-size: 18px;
      color: #6a0dad;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* Feed + Bulletin */
    #activity-feed, #bulletin-board {
      max-height: 220px;
      overflow-y: auto;
      padding: 12px;
      background: #fdfdfd;
      border: 1px solid #ddd;
      border-radius: 12px;
    }

    .feed-item {
      background: #f5f5f5;
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 10px;
      font-size: 0.9rem;
    }

    .feed-time { font-size: 0.75rem; color: #666; }

    /* Collaboration Table */
    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    th, td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }

    th {
      background: #f5f5f5;
      font-weight: bold;
      color: #555;
    }

    .btn-join {
      background: #6a0dad;
      color: white;
      border: none;
      padding: 6px 14px;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .btn-join:hover { background: #ff66b2; }

    .member-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .profile-circle {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      background: #ddd;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 16px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      text-transform: uppercase;
    }

    /* Calendar */
    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 15px 0;
      background: #fff;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }

    .calendar-header button {
      background: #6a0dad;
      color: #fff;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .calendar-header button:hover { background: #ff66b2; }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
      margin-bottom: 20px;
    }

    .day {
      padding: 12px;
      text-align: center;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s ease;
      background: #fff;
    }

    .day:hover { background: #f2e6ff; }
    .today { background: #ff66b2; color: white; font-weight: bold; }

    /* Upcoming Tasks Container */
    .upcoming-container {
      background: #fff;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      margin-bottom: 20px;
    }

    #upcoming-tasks { margin-top: 10px; list-style: none; }
    #upcoming-tasks li {
      background: #f5f5f5;
      margin-bottom: 6px;
      padding: 8px;
      border-radius: 6px;
      font-size: 14px;
    }

    #tasks li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      background: #fff;
      margin-bottom: 6px;
      border-radius: 6px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }

    .task-actions button {
      border: none;
      background: none;
      cursor: pointer;
      font-size: 14px;
      margin-left: 8px;
    }

    .edit-btn { color: #6a0dad; }
    .delete-btn { color: #ff4d4d; }

    .task-input-box {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      background: #fff;
      padding: 12px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .task-input-box input {
      flex: 1;
      border: none;
      outline: none;
      font-size: 15px;
    }

    .task-input-box button {
      background: #6a0dad;
      color: white;
      border: none;
      padding: 6px 14px;
      border-radius: 8px;
      cursor: pointer;
    }

    .task-input-box button:hover { background: #ff66b2; }
    .hidden { display: none; }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar">
    <h2>WORKSPHERE</h2>
    <a href="#" class="active" onclick="showTab(event, 'dashboard')"><i class="fas fa-home"></i> Dashboard</a>
    <a href="#" onclick="showTab(event, 'collaboration')"><i class="fas fa-comments"></i> Collaboration</a>
    <a href="#" onclick="showTab(event, 'calendar')"><i class="fas fa-calendar-alt"></i> Calendar</a>
  </div>

  <div class="main">
    <div class="header">
      <h1 id="page-title">Dashboard</h1>
      <input type="text" placeholder="Search...">
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="tab">
      <div class="cards">
        <div class="card">
          <h3><i class="fas fa-thumbtack"></i> Bulletin Board</h3>
          <div id="bulletin-board">
            <p>ðŸ“Œ Team Meeting every Monday at 10 AM</p>
            <p>ðŸ“Œ Submit project updates by Friday</p>
          </div>
        </div>
        <div class="card">
          <h3><i class="fas fa-bell"></i> Live Activity Feed</h3>
          <div id="activity-feed"></div>
        </div>
      </div>
    </div>

    <!-- Collaboration -->
    <div id="collaboration" class="tab hidden">
      <h2 style="color:#6a0dad; margin-bottom:10px;"><i class="fas fa-comments"></i> Collaboration Tracker</h2>
      <table>
        <thead>
          <tr><th>Member</th><th>Status</th><th>Collaboration Time</th><th>Action</th></tr>
        </thead>
        <tbody>
          <tr data-member="Anna">
            <td><div class="member-info"><div class="profile-circle" data-member="Anna">A</div> Anna</div></td>
            <td class="status" style="color:red;">Absent</td>
            <td class="time">0 mins</td>
            <td><button class="btn-join" onclick="toggleAttendance(this)">Join</button></td>
          </tr>
          <tr data-member="James">
            <td><div class="member-info"><div class="profile-circle" data-member="James">J</div> James</div></td>
            <td class="status" style="color:red;">Absent</td>
            <td class="time">0 mins</td>
            <td><button class="btn-join" onclick="toggleAttendance(this)">Join</button></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Calendar -->
    <div id="calendar" class="tab hidden">
      <h2 style="color:#6a0dad;"><i class="fas fa-calendar-alt"></i> Calendar</h2>
      <div class="calendar-header">
        <button onclick="prevMonth()"><i class="fas fa-chevron-left"></i> Prev</button>
        <h3 id="month-year"></h3>
        <button onclick="nextMonth()">Next <i class="fas fa-chevron-right"></i></button>
      </div>
      <div class="calendar-grid" id="calendar-grid"></div>
      <div class="upcoming-container">
        <h3 style="color:#6a0dad;">ðŸ“… Upcoming Tasks</h3>
        <ul id="upcoming-tasks"></ul>
      </div>
      <div id="task-list">
        <h4>Tasks for <span id="selected-date">Select a day</span></h4>
        <ul id="tasks"></ul>
        <div class="task-input-box">
          <input type="text" id="task-input" placeholder="Add a task">
          <button onclick="addTask()">Add</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const joinTimes = {};
    let tasks = JSON.parse(localStorage.getItem("tasks")) || {};
    let currentDate = new Date();

    function showTab(event, tabId) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.add('hidden'));
      document.getElementById(tabId).classList.remove('hidden');
      document.getElementById("page-title").innerText = tabId.charAt(0).toUpperCase() + tabId.slice(1);
      document.querySelectorAll('.sidebar a').forEach(link => link.classList.remove('active'));
      event.currentTarget.classList.add('active');
      if (tabId === "calendar") { renderCalendar(); renderUpcomingTasks(); }
    }

    function toggleAttendance(button) {
      const row = button.closest("tr");
      const statusCell = row.querySelector(".status");
      const timeCell = row.querySelector(".time");
      const memberName = row.dataset.member;

      if (button.textContent.includes("Join")) {
        statusCell.textContent = "Present";
        statusCell.style.color = "green";
        button.textContent = "Leave";
        joinTimes[memberName] = new Date();
        addActivity(`${memberName} joined the daily meeting`);
      } else {
        const startTime = joinTimes[memberName];
        const diffMinutes = Math.max(1, Math.round((new Date() - startTime) / 60000));
        const currentMinutes = parseInt(timeCell.textContent) || 0;
        timeCell.textContent = `${currentMinutes + diffMinutes} mins`;
        statusCell.textContent = "Absent";
        statusCell.style.color = "red";
        button.textContent = "Join";
        delete joinTimes[memberName];
        addActivity(`${memberName} left the meeting (${diffMinutes} mins)`);
      }
    }

    function addActivity(message) {
      const feed = document.getElementById("activity-feed");
      const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      const div = document.createElement("div");
      div.classList.add("feed-item");
      div.innerHTML = `<strong>${message}</strong><div class="feed-time">${time}</div>`;
      feed.prepend(div);
    }

    function renderCalendar() {
      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();
      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      document.getElementById("month-year").textContent =
        currentDate.toLocaleString('default', { month: 'long', year: 'numeric' });
      const grid = document.getElementById("calendar-grid");
      grid.innerHTML = "";
      for (let i = 0; i < firstDay.getDay(); i++) grid.innerHTML += `<div></div>`;
      for (let d = 1; d <= lastDay.getDate(); d++) {
        const dayDiv = document.createElement("div");
        dayDiv.classList.add("day");
        dayDiv.textContent = d;
        if (d === new Date().getDate() &&
            month === new Date().getMonth() &&
            year === new Date().getFullYear()) {
          dayDiv.classList.add("today");
        }
        dayDiv.onclick = () => selectDate(d, month, year);
        grid.appendChild(dayDiv);
      }
    }

    function selectDate(day, month, year) {
      const dateKey = `${year}-${month + 1}-${day}`;
      document.getElementById("selected-date").textContent = dateKey;
      displayTasks(dateKey);
    }

    function addTask() {
      const dateKey = document.getElementById("selected-date").textContent;
      if (dateKey === "Select a day") return alert("Please select a day first!");
      const taskInput = document.getElementById("task-input");
      if (!taskInput.value.trim()) return;
      if (!tasks[dateKey]) tasks[dateKey] = [];
      tasks[dateKey].push(taskInput.value);
      localStorage.setItem("tasks", JSON.stringify(tasks));
      taskInput.value = "";
      displayTasks(dateKey);
      renderUpcomingTasks();
    }

    function displayTasks(dateKey) {
      const taskList = document.getElementById("tasks");
      taskList.innerHTML = "";
      (tasks[dateKey] || []).forEach((task, i) => {
        const li = document.createElement("li");
        li.innerHTML = `${task} 
          <span class="task-actions">
            <button class="edit-btn" onclick="editTask('${dateKey}',${i})"><i class="fas fa-edit"></i></button>
            <button class="delete-btn" onclick="deleteTask('${dateKey}',${i})"><i class="fas fa-trash"></i></button>
          </span>`;
        taskList.appendChild(li);
      });
    }

    function editTask(dateKey, index) {
      const newTask = prompt("Edit task:", tasks[dateKey][index]);
      if (newTask !== null && newTask.trim()) {
        tasks[dateKey][index] = newTask.trim();
        localStorage.setItem("tasks", JSON.stringify(tasks));
        displayTasks(dateKey);
        renderUpcomingTasks();
      }
    }

    function deleteTask(dateKey, index) {
      tasks[dateKey].splice(index, 1);
      if (tasks[dateKey].length === 0) delete tasks[dateKey];
      localStorage.setItem("tasks", JSON.stringify(tasks));
      displayTasks(dateKey);
      renderUpcomingTasks();
    }

    function renderUpcomingTasks() {
      const today = new Date();
      const upcomingTasks = [];
      for (const dateKey in tasks) {
        const [y, m, d] = dateKey.split("-").map(Number);
        const taskDate = new Date(y, m - 1, d);
        if (taskDate >= today) {
          tasks[dateKey].forEach(task => upcomingTasks.push({ date: dateKey, task }));
        }
      }
      upcomingTasks.sort((a, b) => new Date(a.date) - new Date(b.date));
      const ul = document.getElementById("upcoming-tasks");
      ul.innerHTML = "";
      upcomingTasks.slice(0, 5).forEach(item => {
        const li = document.createElement("li");
        li.textContent = `${item.date}: ${item.task}`;
        ul.appendChild(li);
      });
    }

    function prevMonth() { currentDate.setMonth(currentDate.getMonth() - 1); renderCalendar(); }
    function nextMonth() { currentDate.setMonth(currentDate.getMonth() + 1); renderCalendar(); }

    // Assign unique colors to profile circles
    document.querySelectorAll(".profile-circle").forEach(circle => {
      const name = circle.dataset.member;
      const colors = ["#6a0dad", "#ff66b2", "#ff9800", "#4caf50", "#2196f3"];
      circle.style.background = colors[Math.floor(Math.random() * colors.length)];
    });

    renderCalendar();
    renderUpcomingTasks();
  </script>
</body>
</html>
